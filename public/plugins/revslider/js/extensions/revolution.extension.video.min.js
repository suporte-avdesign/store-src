!function(e){"use strict";var t=jQuery.fn.revolution,a=t.is_mobile(),i=(t.is_android(),{alias:"Video Min JS",name:"revolution.extensions.video.min.js",min_core:"5.4.8",version:"2.2.2"});function o(e){return null==e?-1:jQuery.isNumeric(e)?e:1<e.split(":").length?60*parseInt(e.split(":")[0],0)+parseInt(e.split(":")[1],0):e}jQuery.extend(!0,t,{preLoadAudio:function(e,a){if("stop"===t.compare_version(i).check)return!1;e.find(".tp-audiolayer").each(function(){var e=jQuery(this),i={};0===e.find("audio").length&&(i.src=null!=e.data("videomp4")?e.data("videomp4"):"",i.pre=e.data("videopreload")||"",void 0===e.attr("id")&&e.attr("audio-layer-"+Math.round(199999*Math.random())),i.id=e.attr("id"),i.status="prepared",i.start=jQuery.now(),i.waittime=1e3*e.data("videopreloadwait")||5e3,"auto"!=i.pre&&"canplaythrough"!=i.pre&&"canplay"!=i.pre&&"progress"!=i.pre||(void 0===a.audioqueue&&(a.audioqueue=[]),a.audioqueue.push(i),t.manageVideoLayer(e,a)))})},preLoadAudioDone:function(e,t,a){t.audioqueue&&0<t.audioqueue.length&&jQuery.each(t.audioqueue,function(t,i){e.data("videomp4")!==i.src||i.pre!==a&&"auto"!==i.pre||(i.status="loaded")})},resetVideo:function(e,i,d,n){var r=e.data();switch(r.videotype){case"youtube":r.player;try{if("on"==r.forcerewind){var l=-1==(p=o(e.data("videostartat"))),s=1===r.bgvideo||0<e.find(".tp-videoposter").length;null!=r.player&&(p=-1==p?0:p,r.player.seekTo(p),r.player.pauseVideo())}}catch(e){}0==e.find(".tp-videoposter").length&&1!==r.bgvideo&&!0!==d&&punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"vimeo":var u=e.data("vimeoplayer");try{if("on"==r.forcerewind){var p=o(r.videostartat);l=-1==p,s=1===r.bgvideo||0<e.find(".tp-videoposter").length,(0!==(p=-1==p?0:p)&&!l||s)&&u.pause().then(function(){u.setCurrentTime(p)})}}catch(e){}0==e.find(".tp-videoposter").length&&1!==r.bgvideo&&!0!==d&&punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"html5":if(a&&1==r.disablevideoonmobile)return!1;var v="html5"==r.audio?"audio":"video",c=e.find(v),m=c[0];if(punchgs.TweenLite.to(c,.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"on"==r.forcerewind&&!e.hasClass("videoisplaying"))try{p=o(r.videostartat),m.currentTime=-1==p?0:p}catch(e){}("mute"==r.volume||t.lastToggleState(e.videomutetoggledby)||!0===i.globalmute)&&(m.muted=!0)}},isVideoMuted:function(e,t){var a=!1,i=e.data();switch(i.videotype){case"youtube":try{a=i.player.isMuted()}catch(e){}break;case"vimeo":try{"mute"==i.volume&&(a=!0)}catch(e){}break;case"html5":var o="html5"==i.audio?"audio":"video";e.find(o)[0].muted&&(a=!0)}return a},muteVideo:function(e,t){var a=e.data();switch(a.videotype){case"youtube":try{a.player.mute()}catch(e){}break;case"vimeo":try{var i=e.data("vimeoplayer");e.data("volume","mute"),i.setVolume(0)}catch(e){}break;case"html5":var o="html5"==a.audio?"audio":"video";e.find(o)[0].muted=!0}},unMuteVideo:function(e,t){if(!0!==t.globalmute){var a=e.data();switch(a.videotype){case"youtube":try{a.player.unMute()}catch(e){}break;case"vimeo":try{var i=e.data("vimeoplayer");e.data("volume","1"),i.setVolume(1)}catch(e){}break;case"html5":var o="html5"==a.audio?"audio":"video";e.find(o)[0].muted=!1}}},stopVideo:function(e,t){var a=e.data();switch(t.leaveViewPortBasedStop||(t.lastplayedvideos=[]),t.leaveViewPortBasedStop=!1,a.videotype){case"youtube":try{var i=a.player;if(2===i.getPlayerState()||5===i.getPlayerState())return;i.pauseVideo(),a.youtubepausecalled=!0,setTimeout(function(){a.youtubepausecalled=!1},80)}catch(e){console.log("Issue at YouTube Video Pause:"),console.log(e)}break;case"vimeo":try{e.data("vimeoplayer").pause(),a.vimeopausecalled=!0,setTimeout(function(){a.vimeopausecalled=!1},80)}catch(e){console.log("Issue at Vimeo Video Pause:"),console.log(e)}break;case"html5":var o="html5"==a.audio?"audio":"video",d=e.find(o),n=d[0];null!=d&&null!=n&&n.pause()}},playVideo:function(e,a){clearTimeout(e.data("videoplaywait"));var i=e.data();switch(i.videotype){case"youtube":if(0==e.find("iframe").length)e.append(e.data("videomarkup")),l(e,a,!0);else if(null!=i.player.playVideo){var n=o(e.data("videostartat")),r=i.player.getCurrentTime();1==e.data("nextslideatend-triggered")&&(r=-1,e.data("nextslideatend-triggered",0)),-1!=n&&r<n&&i.player.seekTo(n),!0!==i.youtubepausecalled&&i.player.playVideo()}else e.data("videoplaywait",setTimeout(function(){!0!==i.youtubepausecalled&&t.playVideo(e,a)},50));break;case"vimeo":if(0==e.find("iframe").length)e.removeData("vimeoplayer"),e.append(e.data("videomarkup")),l(e,a,!0);else if(e.hasClass("rs-apiready")){var s,u=e.find("iframe").attr("id");e.data("vimeoplayer")?s=e.data("vimeoplayer"):(s=new Vimeo.Player(u),e.data("vimeoplayer",s)),s.getPaused()?setTimeout(function(){var t=o(e.data("videostartat")),a=e.data("currenttime");a||(a=0),1==e.data("nextslideatend-triggered")&&(a=-1,e.data("nextslideatend-triggered",0)),-1!=t&&a<t&&s.setCurrentTime(t),s.play()},510):e.data("videoplaywait",setTimeout(function(){!0!==i.vimeopausecalled&&t.playVideo(e,a)},50))}else e.data("videoplaywait",setTimeout(function(){!0!==i.vimeopausecalled&&t.playVideo(e,a)},50));break;case"html5":var p="html5"==i.audio?"audio":"video",v=e.find(p),c=v[0];1!=v.parent().data("metaloaded")?d(c,"loadedmetadata",function(e){t.resetVideo(e,a),c.play();var i=o(e.data("videostartat")),d=c.currentTime;1==e.data("nextslideatend-triggered")&&(d=-1,e.data("nextslideatend-triggered",0)),-1!=i&&d<i&&(c.currentTime=i)}(e)):(c.play(),n=o(e.data("videostartat")),r=c.currentTime,1==e.data("nextslideatend-triggered")&&(r=-1,e.data("nextslideatend-triggered",0)),-1!=n&&r<n&&(c.currentTime=n))}},isVideoPlaying:function(e,t){var a=!1;return null!=t.playingvideos&&jQuery.each(t.playingvideos,function(t,i){e.attr("id")==i.attr("id")&&(a=!0)}),a},removeMediaFromList:function(e,t){c(e,t)},prepareCoveredVideo:function(e,a){if((!a.hasClass("tp-caption")||a.hasClass("coverscreenvideo"))&&(void 0===a.data("vimeoid")||void 0!==a.data("vimeoplayerloaded"))){var i={};i.ifr=a.find("iframe, video"),i.asp=a.data("aspectratio"),i.wa=i.asp.split(":")[0],i.ha=i.asp.split(":")[1],i.vd=i.wa/i.ha;var o="carousel"!==e.sliderType?e.conw:a.closest(".tp-revslider-slidesli").width();if(0===o||0===e.conh)return t.setSize(e),clearTimeout(i.ifr.data("resizelistener")),void i.ifr.data("resizelistener",setTimeout(function(){t.prepareCoveredVideo(e,a)},100));var d=o/e.conh,n=d/i.vd*100,r=i.vd/d*100;d>i.vd?punchgs.TweenLite.set(i.ifr,{height:n+"%",width:"100%",top:-(n-100)/2+"%",left:"0px",position:"absolute"}):punchgs.TweenLite.set(i.ifr,{width:r+"%",height:"100%",left:-(r-100)/2+"%",top:"0px",position:"absolute"}),i.ifr.hasClass("resizelistener")||(i.ifr.addClass("resizelistener"),jQuery(window).resize(function(){t.prepareCoveredVideo(e,a),clearTimeout(i.ifr.data("resizelistener")),i.ifr.data("resizelistener",setTimeout(function(){t.prepareCoveredVideo(e,a)},90))}))}},checkVideoApis:function(e,t,a){if(location.protocol,(null!=e.data("ytid")||0<e.find("iframe").length&&0<e.find("iframe").attr("src").toLowerCase().indexOf("youtube"))&&(t.youtubeapineeded=!0),(null!=e.data("ytid")||0<e.find("iframe").length&&0<e.find("iframe").attr("src").toLowerCase().indexOf("youtube"))&&0==a.addedyt){t.youtubestarttime=jQuery.now(),a.addedyt=1;var i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0],d=!0;jQuery("head").find("*").each(function(){"https://www.youtube.com/iframe_api"==jQuery(this).attr("src")&&(d=!1)}),d&&o.parentNode.insertBefore(i,o)}if((null!=e.data("vimeoid")||0<e.find("iframe").length&&0<e.find("iframe").attr("src").toLowerCase().indexOf("vimeo"))&&(t.vimeoapineeded=!0),(null!=e.data("vimeoid")||0<e.find("iframe").length&&0<e.find("iframe").attr("src").toLowerCase().indexOf("vimeo"))&&0==a.addedvim){t.vimeostarttime=jQuery.now(),a.addedvim=1;var n=document.createElement("script");o=document.getElementsByTagName("script")[0],d=!0,n.src="https://player.vimeo.com/api/player.js",jQuery("head").find("*").each(function(){"https://player.vimeo.com/api/player.js"==jQuery(this).attr("src")&&(d=!1)}),d&&o.parentNode.insertBefore(n,o)}return a},manageVideoLayer:function(e,n,r,s){if("stop"===t.compare_version(i).check)return!1;var u=e.data(),v=u.videoattributes,c=u.ytid,m=u.vimeoid,g="auto"===u.videopreload||"canplay"===u.videopreload||"canplaythrough"===u.videopreload||"progress"===u.videopreload?"auto":u.videopreload,y=u.videomp4,f=u.videowebm,h=u.videoogv,b=u.allowfullscreenvideo,w=u.videocontrols,T="http",k="loop"==u.videoloop?"loop":"loopandnoslidestop"==u.videoloop?"loop":"",x=null!=y||null!=f?"html5":null!=c&&1<String(c).length?"youtube":null!=m&&1<String(m).length?"vimeo":"none",V="html5"==u.audio?"audio":"video",L="html5"==x&&0==e.find(V).length?"html5":"youtube"==x&&0==e.find("iframe").length?"youtube":"vimeo"==x&&0==e.find("iframe").length?"vimeo":"none";switch(k=!0===u.nextslideatend?"":k,u.videotype=x,L){case"html5":"controls"!=w&&(w=""),V="video","html5"==u.audio&&(V="audio",e.addClass("tp-audio-html5"));var C="";"video"===V&&(t.is_mobile()||t.isSafari11())&&("on"===u.autoplay||"true"===u.autoplay||!0===u.autoplay?C="muted playsinline autoplay":1!=u.videoinline&&"true"!==u.videoinline&&1!==u.videoinline||(C+=" playsinline"));var P="<"+V+" "+C+' style="object-fit:cover;background-size:cover;visible:hidden;width:100%; height:100%" class="" '+k+' preload="'+g+'">';"auto"==g&&(n.mediapreload=!0),"video"===V?(null!=f&&"firefox"==t.get_browser().toLowerCase()&&(P=P+'<source src="'+f+'" type="video/webm" />'),null!=y&&(P=P+'<source src="'+y+'" type="video/mp4" />'),null!=h&&(P=P+'<source src="'+h+'" type="video/ogg" />')):"audio"===V&&(null!=y&&(P=P+'<source src="'+y+'" type="audio/mpeg" />'),null!=h&&(P=P+'<source src="'+h+'" type="audio/ogg" />')),P=P+"</"+V+">";var I="";"true"!==b&&!0!==b||(I='<div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-full-screen">Full-Screen</button></div>'),"controls"==w&&(P=P+'<div class="tp-video-controls"><div class="tp-video-button-wrap"><button type="button" class="tp-video-button tp-vid-play-pause">Play</button></div><div class="tp-video-seek-bar-wrap"><input  type="range" class="tp-seek-bar" value="0"></div><div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-mute">Mute</button></div><div class="tp-video-vol-bar-wrap"><input  type="range" class="tp-volume-bar" min="0" max="1" step="0.1" value="1"></div>'+I+"</div>"),e.data("videomarkup",P),e.append(P),(a&&1==e.data("disablevideoonmobile")||t.isIE(8))&&e.find(V).remove(),e.find(V).each(function(a){var i,o=jQuery(this);o.parent().hasClass("html5vid")||o.wrap('<div class="html5vid" style="position:relative;top:0px;left:0px;width:100%;height:100%; overflow:hidden;"></div>'),1!=o.parent().data("metaloaded")&&d(this,"loadedmetadata",(p(i=e,n),void t.resetVideo(i,n)))});break;case"youtube":T="https","none"==w&&-1==(v=v.replace("controls=1","controls=0")).toLowerCase().indexOf("controls")&&(v+="&controls=0"),(!0===u.videoinline||"true"===u.videoinline||1===u.videoinline||e.hasClass("rs-background-video-layer")||"on"===e.data("autoplay"))&&(v+="&playsinline=1");var _=o(e.data("videostartat")),S=o(e.data("videoendat"));-1!=_&&(v=v+"&start="+_),-1!=S&&(v=v+"&end="+S);var j=v.split("origin="+T+"://"),A="";1<j.length?(A=j[0]+"origin="+T+"://",self.location.href.match(/www/gi)&&!j[1].match(/www/gi)&&(A+="www."),A+=j[1]):A=v;var O="true"===b||!0===b?"allowfullscreen":"";e.data("videomarkup",'<iframe type="text/html" src="'+T+"://www.youtube-nocookie.com/embed/"+c+"?"+A+'" '+O+' width="100%" height="100%" style="opacity:0;width:100%;height:100%"></iframe>');break;case"vimeo":T="https",e.data("videomarkup",'<iframe src="'+T+"://player.vimeo.com/video/"+m+"?"+v+'" webkitallowfullscreen mozallowfullscreen allowfullscreen width="100%" height="100%" style="opacity:0;visibility:hidden;width:100%;height:100%"></iframe>')}var Q=a&&"on"==e.data("noposteronmobile");if(null!=u.videoposter&&2<u.videoposter.length&&!Q)0==e.find(".tp-videoposter").length&&e.append('<div class="tp-videoposter noSwipe" style="cursor:pointer; position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:3;background-image:url('+u.videoposter+'); background-size:cover;background-position:center center;"></div>'),0==e.find("iframe").length&&e.find(".tp-videoposter").click(function(){if(t.playVideo(e,n),a){if(1==e.data("disablevideoonmobile"))return!1;punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut})}});else{if(a&&1==e.data("disablevideoonmobile"))return!1;0!=e.find("iframe").length||"youtube"!=x&&"vimeo"!=x||(e.removeData("vimeoplayer"),e.append(e.data("videomarkup")),l(e,n,!1))}"none"!=e.data("dottedoverlay")&&null!=e.data("dottedoverlay")&&1!=e.find(".tp-dottedoverlay").length&&e.append('<div class="tp-dottedoverlay '+e.data("dottedoverlay")+'"></div>'),e.addClass("HasListener"),1==e.data("bgvideo")&&(e.data("ytid")?punchgs.TweenLite.set(e.find("iframe"),{opacity:0}):punchgs.TweenLite.set(e.find("video, iframe"),{autoAlpha:0}))}});var d=function(e,t,a){e.addEventListener?e.addEventListener(t,a,{capture:!1,passive:!0}):e.attachEvent(t,a,{capture:!1,passive:!0})},n=function(e,t,a){var i={};return i.video=e,i.videotype=t,i.settings=a,i},r=function(e,a){if(1==a.data("bgvideo")||1==a.data("forcecover")){1===a.data("forcecover")&&a.removeClass("fullscreenvideo").addClass("coverscreenvideo");var i=a.data("aspectratio");void 0===i&&i.split(":").length<=1&&a.data("aspectratio","16:9"),t.prepareCoveredVideo(e,a)}},l=function(e,i,d){var l=e.data(),p=e.find("iframe"),m="iframe"+Math.round(1e5*Math.random()+1),g=l.videoloop,y="loopandnoslidestop"!=g;if(g="loop"==g||"loopandnoslidestop"==g,r(i,e),p.attr("id",m),d&&e.data("startvideonow",!0),1!==e.data("videolistenerexist"))switch(l.videotype){case"youtube":var f=new YT.Player(m,{events:{onStateChange:function(a){var d=e.closest(".tp-simpleresponsive"),r=(l.videorate,e.data("videostart"),u());if(a.data==YT.PlayerState.PLAYING)punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"mute"==e.data("volume")||t.lastToggleState(e.data("videomutetoggledby"))||!0===i.globalmute?f.mute():(f.unMute(),f.setVolume(parseInt(e.data("volume"),0)||75)),i.videoplaying=!0,v(e,i),y?i.c.trigger("stoptimer"):i.videoplaying=!1,i.c.trigger("revolution.slide.onvideoplay",n(f,"youtube",e.data())),t.toggleState(l.videotoggledby);else{if(0==a.data&&g){var p=o(e.data("videostartat"));-1!=p&&f.seekTo(p),f.playVideo(),t.toggleState(l.videotoggledby)}r||0!=a.data&&2!=a.data||!("on"==e.data("showcoveronpause")&&0<e.find(".tp-videoposter").length||1===e.data("bgvideo")&&0<e.find(".rs-fullvideo-cover").length)||(1===e.data("bgvideo")?punchgs.TweenLite.to(e.find(".rs-fullvideo-cover"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}):punchgs.TweenLite.to(e.find(".tp-videoposter"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.1,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),-1!=a.data&&3!=a.data&&(i.videoplaying=!1,i.tonpause=!1,c(e,i),d.trigger("starttimer"),i.c.trigger("revolution.slide.onvideostop",n(f,"youtube",e.data())),null!=i.currentLayerVideoIsPlaying&&i.currentLayerVideoIsPlaying.attr("id")!=e.attr("id")||t.unToggleState(l.videotoggledby)),0==a.data&&1==e.data("nextslideatend")?(s(),e.data("nextslideatend-triggered",1),i.c.revnext(),c(e,i)):(c(e,i),i.videoplaying=!1,d.trigger("starttimer"),i.c.trigger("revolution.slide.onvideostop",n(f,"youtube",e.data())),null!=i.currentLayerVideoIsPlaying&&i.currentLayerVideoIsPlaying.attr("id")!=e.attr("id")||t.unToggleState(l.videotoggledby))}},onReady:function(i){var d,n=t.is_mobile(),r=e.hasClass("tp-videolayer");if(n||t.isSafari11()){var s=r&&"off"!==e.data("autoplay");(e.hasClass("rs-background-video-layer")||s)&&(n&&r||(d=!0,f.setVolume(0),e.data("volume","mute"),f.mute(),clearTimeout(e.data("mobilevideotimr")),e.data("mobilevideotimr",setTimeout(function(){f.playVideo()},500))))}d||"mute"!=e.data("volume")||(f.setVolume(0),f.mute());var u=l.videorate;if(e.data("videostart"),e.addClass("rs-apiready"),null!=u&&i.target.setPlaybackRate(parseFloat(u)),e.find(".tp-videoposter").unbind("click"),e.find(".tp-videoposter").click(function(){a||f.playVideo()}),e.data("startvideonow")){l.player.playVideo();var p=o(e.data("videostartat"));-1!=p&&l.player.seekTo(p)}e.data("videolistenerexist",1)}}});e.data("player",f);break;case"vimeo":for(var h,b=p.attr("src"),w={},T=b,k=/([^&=]+)=([^&]*)/g;h=k.exec(T);)w[decodeURIComponent(h[1])]=decodeURIComponent(h[2]);b=(b=null!=w.player_id?b.replace(w.player_id,m):b+"&player_id="+m).replace(/&api=0|&api=1/g,"");var x=t.is_mobile(),V=e.data("autoplay"),L=(e.data("volume"),x||t.isSafari11());e.hasClass("rs-background-video-layer"),(V="on"===V||"true"===V||!0===V)&&L&&(b+="?autoplay=1&autopause=0&muted=1&background=1&playsinline=1",e.data({vimeoplaysinline:!0,volume:"mute"})),p.attr("src",b),f=e.find("iframe")[0],jQuery("#"+m),e.data("vimeoplayer")?P=e.data("vimeoplayer"):(P=new Vimeo.Player(m),e.data("vimeoplayer",P)),P.on("loaded",function(t){var a={};P.getVideoWidth().then(function(t){a.width=t,void 0!==a.width&&void 0!==a.height&&(e.data("aspectratio",a.width+":"+a.height),e.data("vimeoplayerloaded",!0),r(i,e))}),P.getVideoHeight().then(function(t){a.height=t,void 0!==a.width&&void 0!==a.height&&(e.data("aspectratio",a.width+":"+a.height),e.data("vimeoplayerloaded",!0),r(i,e))})}),e.addClass("rs-apiready"),P.on("play",function(a){e.data("nextslidecalled",0),punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),i.c.trigger("revolution.slide.onvideoplay",n(P,"vimeo",e.data())),i.videoplaying=!0,v(e,i),y?i.c.trigger("stoptimer"):i.videoplaying=!1,e.data("vimeoplaysinline")||("mute"==e.data("volume")||t.lastToggleState(e.data("videomutetoggledby"))||!0===i.globalmute?P.setVolume(0):P.setVolume(parseInt(e.data("volume"),0)/100||.75),t.toggleState(l.videotoggledby))}),P.on("timeupdate",function(t){var a=o(e.data("videoendat"));if(e.data("currenttime",t.seconds),0!=a&&Math.abs(a-t.seconds)<1&&a>t.seconds&&1!=e.data("nextslidecalled"))if(g){P.play();var d=o(e.data("videostartat"));-1!=d&&P.setCurrentTime(d)}else 1==e.data("nextslideatend")&&(e.data("nextslideatend-triggered",1),e.data("nextslidecalled",1),i.c.revnext()),P.pause()}),P.on("ended",function(a){c(e,i),i.videoplaying=!1,i.c.trigger("starttimer"),i.c.trigger("revolution.slide.onvideostop",n(P,"vimeo",e.data())),1==e.data("nextslideatend")&&(e.data("nextslideatend-triggered",1),i.c.revnext()),null!=i.currentLayerVideoIsPlaying&&i.currentLayerVideoIsPlaying.attr("id")!=e.attr("id")||t.unToggleState(l.videotoggledby)}),P.on("pause",function(a){("on"==e.data("showcoveronpause")&&0<e.find(".tp-videoposter").length||1===e.data("bgvideo")&&0<e.find(".rs-fullvideo-cover").length)&&(1===e.data("bgvideo")?punchgs.TweenLite.to(e.find(".rs-fullvideo-cover"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}):punchgs.TweenLite.to(e.find(".tp-videoposter"),.1,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.1,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),i.videoplaying=!1,i.tonpause=!1,c(e,i),i.c.trigger("starttimer"),i.c.trigger("revolution.slide.onvideostop",n(P,"vimeo",e.data())),null!=i.currentLayerVideoIsPlaying&&i.currentLayerVideoIsPlaying.attr("id")!=e.attr("id")||t.unToggleState(l.videotoggledby)}),e.find(".tp-videoposter").unbind("click"),e.find(".tp-videoposter").click(function(){if(!a)return P.play(),!1}),e.data("startvideonow")&&(P.play(),-1!=(C=o(e.data("videostartat")))&&P.setCurrentTime(C)),e.data("videolistenerexist",1)}else{var C=o(e.data("videostartat"));switch(l.videotype){case"youtube":d&&(l.player.playVideo(),-1!=C&&l.player.seekTo());break;case"vimeo":var P;d&&((P=e.data("vimeoplayer")).play(),-1!=C&&P.seekTo(C))}}},s=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},u=function(){try{if(void 0!==window.fullScreen)return window.fullScreen;var e=5;return jQuery.browser.webkit&&/Apple Computer/.test(navigator.vendor)&&(e=42),screen.width==window.innerWidth&&Math.abs(screen.height-window.innerHeight)<e}catch(e){}},p=function(e,i,r){if(a&&1==e.data("disablevideoonmobile"))return!1;var l=e.data(),p="html5"==l.audio?"audio":"video",m=e.find(p),g=m[0],y=m.parent(),f=l.videoloop,h="loopandnoslidestop"!=f;if(f="loop"==f||"loopandnoslidestop"==f,y.data("metaloaded",1),1!=e.data("bgvideo")||"none"!==l.videoloop&&!1!==l.videoloop||(h=!1),null==m.attr("control")&&(0!=e.find(".tp-video-play-button").length||a||e.append('<div class="tp-video-play-button"><i class="revicon-right-dir"></i><span class="tp-revstop">&nbsp;</span></div>'),e.find("video, .tp-poster, .tp-video-play-button").click(function(){e.hasClass("videoisplaying")?g.pause():g.play()})),1==e.data("forcecover")||e.hasClass("fullscreenvideo")||1==e.data("bgvideo"))if(1==e.data("forcecover")||1==e.data("bgvideo")){y.addClass("fullcoveredvideo");var b=e.data("aspectratio");void 0!==b&&1!=b.split(":").length||e.data("aspectratio","16:9"),t.prepareCoveredVideo(i,e)}else y.addClass("fullscreenvideo");var w=e.find(".tp-vid-play-pause")[0],T=e.find(".tp-vid-mute")[0],k=e.find(".tp-vid-full-screen")[0],x=e.find(".tp-seek-bar")[0],V=e.find(".tp-volume-bar")[0];null!=w&&d(w,"click",function(){1==g.paused?g.play():g.pause()}),null!=T&&d(T,"click",function(){0==g.muted?(g.muted=!0,T.innerHTML="Unmute"):(g.muted=!1,T.innerHTML="Mute")}),null!=k&&k&&d(k,"click",function(){g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen&&g.webkitRequestFullscreen()}),null!=x&&(d(x,"change",function(){var e=g.duration*(x.value/100);g.currentTime=e}),d(x,"mousedown",function(){e.addClass("seekbardragged"),g.pause()}),d(x,"mouseup",function(){e.removeClass("seekbardragged"),g.play()})),d(g,"canplaythrough",function(){t.preLoadAudioDone(e,i,"canplaythrough")}),d(g,"canplay",function(){t.preLoadAudioDone(e,i,"canplay")}),d(g,"progress",function(){t.preLoadAudioDone(e,i,"progress")}),d(g,"timeupdate",function(){var t=100/g.duration*g.currentTime,a=o(e.data("videoendat")),d=g.currentTime;if(null!=x&&(x.value=t),0!=a&&-1!=a&&Math.abs(a-d)<=.3&&d<a&&1!=e.data("nextslidecalled"))if(f){g.play();var n=o(e.data("videostartat"));-1!=n&&(g.currentTime=n)}else 1==e.data("nextslideatend")&&(e.data("nextslideatend-triggered",1),e.data("nextslidecalled",1),i.just_called_nextslide_at_htmltimer=!0,i.c.revnext(),setTimeout(function(){i.just_called_nextslide_at_htmltimer=!1},1e3)),g.pause()}),null!=V&&d(V,"change",function(){g.volume=V.value}),d(g,"play",function(){e.data("nextslidecalled",0);var a=e.data("volume");a=null!=a&&"mute"!=a?parseFloat(a)/100:a,t.is_mobile()||t.isSafari11()||(!0===i.globalmute?g.muted=!0:g.muted=!1,1<a&&(a/=100),"mute"==a?g.muted=!0:null!=a&&(g.volume=a)),e.addClass("videoisplaying");var o="html5"==l.audio?"audio":"video";v(e,i),h&&"audio"!=o?(i.videoplaying=!0,i.c.trigger("stoptimer"),i.c.trigger("revolution.slide.onvideoplay",n(g,"html5",l))):(i.videoplaying=!1,"audio"!=o&&i.c.trigger("starttimer"),i.c.trigger("revolution.slide.onvideostop",n(g,"html5",l))),punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find(o),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});var d=e.find(".tp-vid-play-pause")[0],r=e.find(".tp-vid-mute")[0];null!=d&&(d.innerHTML="Pause"),null!=r&&g.muted&&(r.innerHTML="Unmute"),t.toggleState(l.videotoggledby)}),d(g,"pause",function(a){var o="html5"==l.audio?"audio":"video";!u()&&0<e.find(".tp-videoposter").length&&"on"==e.data("showcoveronpause")&&!e.hasClass("seekbardragged")&&(punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find(o),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),e.removeClass("videoisplaying"),i.videoplaying=!1,c(e,i),"audio"!=o&&i.c.trigger("starttimer"),i.c.trigger("revolution.slide.onvideostop",n(g,"html5",e.data()));var d=e.find(".tp-vid-play-pause")[0];null!=d&&(d.innerHTML="Play"),null!=i.currentLayerVideoIsPlaying&&i.currentLayerVideoIsPlaying.attr("id")!=e.attr("id")||t.unToggleState(l.videotoggledby)}),d(g,"ended",function(){s(),c(e,i),i.videoplaying=!1,c(e,i),"audio"!=p&&i.c.trigger("starttimer"),i.c.trigger("revolution.slide.onvideostop",n(g,"html5",e.data())),!0===e.data("nextslideatend")&&0<g.currentTime&&(1==!i.just_called_nextslide_at_htmltimer&&(e.data("nextslideatend-triggered",1),i.c.revnext(),i.just_called_nextslide_at_htmltimer=!0),setTimeout(function(){i.just_called_nextslide_at_htmltimer=!1},1500)),e.removeClass("videoisplaying")})},v=function(e,a){null==a.playingvideos&&(a.playingvideos=new Array),e.data("stopallvideos")&&null!=a.playingvideos&&0<a.playingvideos.length&&(a.lastplayedvideos=jQuery.extend(!0,[],a.playingvideos),jQuery.each(a.playingvideos,function(e,i){t.stopVideo(i,a)})),a.playingvideos.push(e),a.currentLayerVideoIsPlaying=e},c=function(e,t){null!=t.playingvideos&&0<=jQuery.inArray(e,t.playingvideos)&&t.playingvideos.splice(jQuery.inArray(e,t.playingvideos),1)}}(jQuery);
